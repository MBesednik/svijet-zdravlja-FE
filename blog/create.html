<!DOCTYPE html>
<html lang="hr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Svijet Zdravlja | Nova objava</title>
    <link rel="stylesheet" href="../styles/style.css" />
    <link rel="stylesheet" href="../styles/admin.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Ako korisnik nije admin, enforceAdminAccess će ga odmah preusmjeriti -->
    <script src="../scripts/admin-guard.js"></script>
    <script>
      // Pozivemo zaštitu odmah nakon učitavanja
      document.addEventListener("DOMContentLoaded", function () {
        if (window.adminGuard) {
          window.adminGuard.enforceAdminAccess("../404.html");
        }
      });
    </script>

    <header class="header">
      <div class="header__container container">
        <a href="../index.html" class="header__logo">
          <img
            src="../images/logo/SZ_cijelilogo_transparent.png"
            alt="Svijet Zdravlja logo"
            class="header__logo-img"
          />
        </a>

        <nav class="header__nav">
          <ul class="header__nav-list">
            <li class="header__nav-item">
              <a href="../index.html" class="header__nav-link">Početna</a>
            </li>
            <li class="header__nav-item">
              <a href="#" class="header__nav-link">O nama</a>
            </li>
            <li class="header__nav-item">
              <a href="#" class="header__nav-link">Usluge</a>
            </li>
            <li class="header__nav-item">
              <a href="blog.html" class="header__nav-link">Blog</a>
            </li>
            <li class="header__nav-item">
              <a href="#" class="header__nav-link">Kontakt</a>
            </li>
          </ul>
        </nav>

        <button
          class="header__hamburger"
          aria-label="Toggle navigation"
          aria-expanded="false"
        >
          <span class="header__hamburger-line"></span>
          <span class="header__hamburger-line"></span>
          <span class="header__hamburger-line"></span>
        </button>
      </div>
    </header>

    <main class="blog-create">
      <div class="blog-create__container container">
        <header class="blog-create__header">
          <div>
            <p class="blog__eyebrow">Upravljanje sadržajem</p>
            <h1 id="post-form-heading">Nova objava</h1>
            <p>
              Popunite sve potrebne informacije i kreirajte novu blog objavu.
              Možete je objaviti odmah ili je spremiti kao skicu.
            </p>
          </div>
          <a href="blog.html" class="btn btn--secondary">Natrag na popis</a>
        </header>

        <form id="post-form" novalidate enctype="multipart/form-data">
          <div
            id="post-form-status"
            class="form-status"
            role="status"
            aria-live="polite"
            hidden
          ></div>

          <!-- OSNOVNE INFORMACIJE -->
          <section class="form__section">
            <h2 class="form__section-title">Osnovne informacije</h2>

            <div class="form__grid">
              <div class="form__group form__group--full">
                <label for="post-title">Naslov objave *</label>
                <input
                  type="text"
                  id="post-title"
                  name="title"
                  required
                  minlength="3"
                  maxlength="255"
                  placeholder="Npr. 5 brzih ideja za zdrav doručak"
                />
                <span class="form__hint"
                  >Minimalno 3 znaka, maksimalno 255.</span
                >
              </div>

              <div class="form__group form__group--full">
                <label for="post-slug">URL slug *</label>
                <input
                  type="text"
                  id="post-slug"
                  name="slug"
                  required
                  placeholder="npr. zdravi-dorucak"
                  pattern="^[a-z0-9]+(?:-[a-z0-9]+)*$"
                />
                <span class="form__hint">
                  Samo mala slova, brojeve i crtice. Mora biti jedinstvena.
                </span>
              </div>

              <div class="form__group form__group--full">
                <label for="post-summary">Sažetak *</label>
                <textarea
                  id="post-summary"
                  name="summary"
                  required
                  minlength="10"
                  maxlength="500"
                  rows="3"
                  placeholder="Kraći opis koji će se prikazati u pregledima..."
                ></textarea>
                <span class="form__hint"
                  >Prikazuje se kao pretpregled objave.</span
                >
              </div>
            </div>
          </section>

          <!-- META PODACI ZA SEO -->
          <section class="form__section">
            <h2 class="form__section-title">SEO optimizacija</h2>

            <div class="form__grid">
              <div class="form__group form__group--full">
                <label for="post-meta-title">Meta naslov</label>
                <input
                  type="text"
                  id="post-meta-title"
                  name="meta_title"
                  maxlength="60"
                  placeholder="Naslov za pretraživače (do 60 znakova)"
                />
                <span class="form__hint"
                  >Ako je prazno, koristi se glavni naslov.</span
                >
              </div>

              <div class="form__group form__group--full">
                <label for="post-meta-description">Meta opis</label>
                <textarea
                  id="post-meta-description"
                  name="meta_description"
                  maxlength="160"
                  rows="2"
                  placeholder="Opis za pretraživače (do 160 znakova)"
                ></textarea>
                <span class="form__hint"
                  >Koristi se u rezultatima pretraživanja.</span
                >
              </div>
            </div>
          </section>

          <!-- SADRŽAJ -->
          <section class="form__section">
            <h2 class="form__section-title">Sadržaj objave</h2>

            <div id="chapters-container" class="chapters">
              <h3 class="chapters__title">Poglavlja objave</h3>
              <div id="chapters-list" class="chapters__list"></div>
              <button
                type="button"
                id="add-chapter-btn"
                class="btn btn--secondary btn--small"
              >
                + Dodaj poglavlje
              </button>
            </div>
          </section>

          <!--媒IJSKI SADRŽAJ -->
          <section class="form__section">
            <h2 class="form__section-title">Naslovna slika</h2>

            <div class="form__group form__group--full">
              <label for="post-hero-image">Naslovna slika *</label>
              <div class="file-upload">
                <input
                  type="file"
                  id="post-hero-image"
                  name="hero_image"
                  required
                  accept="image/jpeg,image/png,image/webp"
                />
                <div class="file-upload__dropzone">
                  <svg
                    class="file-upload__icon"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                  </svg>
                  <p class="file-upload__text">
                    Prevucite sliku ili <strong>kliknite za odabir</strong>
                  </p>
                  <p class="file-upload__hint">JPG, PNG ili WEBP (max 2 MB)</p>
                </div>
              </div>
              <img
                id="post-hero-preview"
                alt="Pretpregled naslove slike"
                class="form__image-preview"
                hidden
              />
            </div>
          </section>

          <!-- KATEGORIJE -->
          <section class="form__section">
            <h2 class="form__section-title">Kategorije</h2>

            <div class="form__group form__group--full">
              <label for="post-categories">Odaberite kategorije</label>
              <div id="post-categories" class="categories-select">
                <div class="categories-input">
                  <input
                    type="text"
                    id="categories-search"
                    placeholder="Pretraži ili dodaj novu kategoriju..."
                    class="categories-input__field"
                  />
                </div>
                <div id="categories-list" class="categories-list"></div>
              </div>
              <span class="form__hint"
                >Odaberite jednu ili više kategorija za blaži
                pronalaženja.</span
              >
            </div>
          </section>

          <!-- STATUS I OBJAVA -->
          <section class="form__section">
            <h2 class="form__section-title">Status objave</h2>

            <div class="form__grid">
              <div class="form__group">
                <label for="post-status">Status *</label>
                <select id="post-status" name="status" required>
                  <option value="">-- Odaberite status --</option>
                  <option value="DRAFT">Skica (Draft)</option>
                  <option value="PUBLISHED">Objavljena</option>
                  <option value="SCHEDULED">Zakazana</option>
                  <option value="HIDDEN">Skrivena</option>
                  <option value="ARCHIVED">Arhivirana</option>
                </select>
                <span class="form__hint">Odaberite status objave.</span>
              </div>

              <div class="form__group" id="scheduled-date-group" hidden>
                <label for="post-scheduled-for">Zakazano za *</label>
                <input
                  type="datetime-local"
                  id="post-scheduled-for"
                  name="scheduled_for"
                />
                <span class="form__hint">Datum i vrijeme objavljivanja.</span>
              </div>

              <div class="form__group form__checkbox">
                <input type="checkbox" id="post-featured" name="is_featured" />
                <label for="post-featured">Istaknut post (Featured)</label>
              </div>
            </div>
          </section>

          <!-- AKCIJE -->
          <div class="form__actions">
            <button type="submit" id="post-save" class="btn btn--primary">
              Kreiraj objavu
            </button>
            <button
              type="button"
              id="post-save-draft"
              class="btn btn--secondary"
            >
              Spremi kao skicu
            </button>
            <a href="blog.html" id="post-cancel" class="btn btn--outline">
              Odustani
            </a>
          </div>
        </form>
      </div>
    </main>

    <footer class="footer">
      <div class="footer__container container">
        <div class="footer__content">
          <div class="footer__brand">
            <a href="../index.html" class="footer__logo">
              <img
                src="../images/logo/SZ_cijelilogo_transparent.png"
                alt="Svijet Zdravlja logo"
                class="footer__logo-img"
              />
            </a>
            <p class="footer__description">
              Vaš pouzdani partner za zdravlje i dobrobit.
            </p>
          </div>

          <div class="footer__links">
            <div class="footer__column">
              <h4 class="footer__title">Navigacija</h4>
              <ul class="footer__list">
                <li class="footer__list-item">
                  <a href="../index.html" class="footer__link">Početna</a>
                </li>
                <li class="footer__list-item">
                  <a href="#" class="footer__link">O nama</a>
                </li>
                <li class="footer__list-item">
                  <a href="#" class="footer__link">Usluge</a>
                </li>
                <li class="footer__list-item">
                  <a href="index.html" class="footer__link">Blog</a>
                </li>
              </ul>
            </div>

            <div class="footer__column">
              <h4 class="footer__title">Kontakt</h4>
              <ul class="footer__list">
                <li class="footer__list-item">
                  <a href="tel:+385123456789" class="footer__link"
                    >+385 12 345 6789</a
                  >
                </li>
                <li class="footer__list-item">
                  <a href="mailto:info@svijet-zdravlja.hr" class="footer__link"
                    >info@svijet-zdravlja.hr</a
                  >
                </li>
                <li class="footer__list-item">
                  <span class="footer__text">Zagreb, Hrvatska</span>
                </li>
              </ul>
            </div>

            <div class="footer__column">
              <h4 class="footer__title">Pratite nas</h4>
              <ul class="footer__social">
                <li class="footer__social-item">
                  <a href="#" class="footer__social-link" aria-label="Facebook">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                      <path
                        d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </a>
                </li>
                <li class="footer__social-item">
                  <a
                    href="#"
                    class="footer__social-link"
                    aria-label="Instagram"
                  >
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                      <rect
                        x="2"
                        y="2"
                        width="20"
                        height="20"
                        rx="5"
                        ry="5"
                        stroke="currentColor"
                        stroke-width="2"
                      />
                      <circle
                        cx="12"
                        cy="12"
                        r="4"
                        stroke="currentColor"
                        stroke-width="2"
                      />
                      <circle cx="17.5" cy="6.5" r="1.5" fill="currentColor" />
                    </svg>
                  </a>
                </li>
                <li class="footer__social-item">
                  <a href="#" class="footer__social-link" aria-label="LinkedIn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                      <path
                        d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6zM2 9h4v12H2z"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <circle
                        cx="4"
                        cy="4"
                        r="2"
                        stroke="currentColor"
                        stroke-width="2"
                      />
                    </svg>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="footer__bottom">
          <p class="footer__copyright">
            &copy; 2025 Svijet Zdravlja. Sva prava pridržana.
          </p>
        </div>
      </div>
    </footer>

    <script src="../scripts/config.js"></script>
    <script src="../scripts/main.js"></script>
    <script src="../scripts/admin-form.js"></script>
  </body>
</html>
